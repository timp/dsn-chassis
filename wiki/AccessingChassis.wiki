#summary How to use the REST interface when it is secured by CAS/Spring Security

= Introduction =

The Chassis REST interface can be deployed behind either CAS or Basic Auth security together with Spring Security

==CAS Authentication==
Key points are that the CAS RESTlet interface must be enabled to allow initial authentication and subsequently the Spring Security JSESSIONID cookie must be used.

==REST Interface==
A detailed introduction to using the REST interface can be found as part of the AtomBeat wiki [http://code.google.com/p/atombeat/wiki/TutorialGettingStarted]

= A script to authenticate against CAS =

{{{
USERNAME=
PASSWORD=
HOST=http://hostname/repository
TICKETS=http://hostname/sso/v1/tickets
TARGET=${HOST}/service/content/studies
TGT=`wget --post-data="username=${USERNAME}&password=${PASSWORD}" -q -O - -d ${TICKETS} 2>&1 | grep Location | grep TGT | awk -F/ '{printf $NF}'`
#get Service Ticket
ST=`wget --post-data="service=${TARGET}" -q -O - -d ${TICKETS}/${TGT}`
#Get the resource
curl -c cookie-jar -o studies.ticket -i -H "Accept: text/xml" -X GET ${TARGET}?ticket=$ST
curl -b cookie-jar -o studies.cookie -i -H "Accept: text/xml" -X GET ${TARGET}
curl -b cookie-jar -o post.out -i -H "Content-Type: application/atom+xml" --data-binary @new-study ${HOST}/service/content/studies
}}}