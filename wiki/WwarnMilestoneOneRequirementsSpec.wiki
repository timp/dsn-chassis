#summary This document is a specification of user requirements for a first milestone release (M1) of the Chassis/WWARN system for managing the submission, curation and standardisation of data for the World Wide Anti-malarial Resistance Network (WWARN).

----
*Table of Contents*

<wiki:toc/>
----

= Introduction =

This document is a specification of user requirements for the _Chassis/WWARN_ (M1) system for managing the submission, curation and standardisation of data for the World Wide Anti-malarial Resistance Network (WWARN).

== WWARN Data Management ==

The _Chassis/WWARN_ (M1) system is intended to support the data management activities of the WWARN data-sharing network. These data management activities include the submission of data, curation of submitted data to meet defined quality control and other (e.g., ethical) criteria, and mapping of data onto WWARN standards for data structure and semantics. The end goal of these activities is to produce data that is suitable for ingest into the WWARN database.

== Chassis/WWARN and the WWARN Database ==

Note that the _Chassis/WWARN_ (M1) system is distinct from the _WWARN database_. The _WWARN database_ is a repository of standardised, quality controlled data, with tools for the analysis and visualisation of those data. Data will be periodically exported from the _Chassis/WWARN_ (M1) system and ingested into the _WWARN database_. Management of this export and ingest process, and any support for visualisation or analysis tools, is out of scope for the _Chassis/WWARN_ system.

== First Milestone Release (M1) ==

The _Chassis/WWARN_ (M1) system is intended to be a first milestone release of the _Chassis/WWARN_ system for production use by WWARN. This document specifies the functionality that must be included in the first milestone release. Some other functionality that might be developed for future releases of _Chassis/WWARN_ is also discussed.

== Chassis/`*` ==

This user requirements specification is tailored towards the requirements of the WWARN data-sharing network. However, the _Chassis/WWARN_ system is intended to be the first instance of a generic platform (_Chassis/`*`_) to support the data management activities of similar data-sharing networks.

== Structure of this Document ==

This document is divided into two main parts. The first part describes use cases and functional requirements relating to the submission of new data to WWARN, and the initial review of those submissions by a gatekeeper. The second part describes use cases and functional requirements for the curation and standardisation of submitted data, i.e., all activities necessary to make submitted data suitable for release to the WWARN database. 

----
= Roles =

The following roles are defined here for users of the _Chassis/WWARN_ (M1) system.

  * A *submitter* is someone who can create a data submission. A submitter represents and is assumed to act for the people and/or organisations who have intellectual property rights and copyright over any data they submit. 

  * A *gatekeeper* is someone with the authority to approve a data submission. By approving a submission, the gatekeeper is asserting that the submission is relevant to WWARN, and authorising the expenditure of resources (i.e., time and effort) on curating and standardising the submission. 

  * A *curator* is someone who will perform curation activities, which might include (but is not limited to) reviewing submitted data, revising submitted data, ensure data meet quality control criteria and community standards.

  * A *coordinator* is someone who has overall responsibility for the operations of a data-sharing network.

----
= Part 1 - Data Submission =
----
== Data Submission Workflow - Key Points ==

The _Chassis/WWARN_ (M1) system is designed to support a data submission workflow with the following key characteristics.

  * Data submission is the process whereby new data enters the Chassis/WWARN system.

  * A submitter initiates the process by creating a new submission. The submitter then provides some information about the submission, and uploads a data file containing the initial version of the submitted data.

  * Submitted data must be linked to a data dictionary, before a request can be made for gatekeeper approval of a new submission. In the simplest case, a data dictionary is a human-readable document, stating that the submitted data are structured as a single table, listing the field or column names used in the table, and providing a textual definition for each field name. However, the Chassis/WWARN (M1) system does not place any constraints on the structure or content of submitted data or data dictionaries. 
  
  * A submitter can create a new data dictionary for each new submission, or re-use an existing data dictionary.

  * The submitter can then request gatekeeper approval of their new submission. The gatekeeper is responsible for performing an initial evaluation of the submitted data and accompanying data dictionary, to determine whether or not resources (i.e., time and effort) should be spent curating the data and mapping it onto a WWARN standard data dictionary. The gatekeeper *is not* responsible for making any modifications to the data or approving the data for ingest into the WWARN database.

  * If the gatekeeper approves the request, then the submission proceeds to curation. If the gatekeeper denies the request, the submission does not proceed to curation. Once a gatekeeper has approved a submission request, they can assign a curator to the submission. Responsibility for the submission then passes from the gatekeeper to the assigned curator.

  * Before a submitter has requested gatekeeper approval for a submission, they can make revisions to the submitted data. A submitter can also revise a submission after gatekeeper approval has been denied, and make a new request for gatekeeper approval of the revised submission. 

  * There may be more than one gatekeeper. For Chassis/WWARN (M1), it is anticipated that the gatekeepers will be the module heads. If this is the case, then the Chassis/WWARN system will assign a gatekeeper to each new submission based on the module to which the submission is linked by its submitter.

  * Chassis/WWARN (M1) does not place any restriction on the nature or format of the data file uploaded as submitted data. The Chassis/WWARN (M1) system will not attempt to parse the submitted data file, and will not provide any previews of the submitted data. Later versions of Chassis/WWARN may provide support for parsing and previewing of data files containing a single table of data.

  * Chassis/WWARN (M1) does not place any restrictions on the nature or format of the data dictionary file uploaded when a new data dictionary is created or revised. The system will not attempt to parse the data dictionary file, nor provide any preview of its contents. Later versions of Chassis/WWARN may constrain data dictionary files to a single format, and parse files to store and provide views of data dictionaries. Later versions of the system may also provide online support for creating and editing the contents of data dictionaries, without needing to upload files.

----
== Data Submission Use Cases ==

The use cases below provide a more detailed illustration of how a user will interact with the Chassis/WWARN system in the most commonly anticipated scenarios. The use cases *are not* intended to cover every possible scenario.

=== Use Case: Submitter Creates a New Study ===

Every submission must be linked to at least one study. Before creating the first submission for a study, a submitter creates a new study, providing at a title and textual summary for the study, and linking the new study to at least one module.

N.B. a submitter can then proceed to enter all required metadata for the new study (i.e., fill out the study site questionnaire). However, it is not necessary that any further metadata be entered before a submitter can create new submissions or request gatekeeper approval for a submission.

=== Use Case: Submitter Creates a New Submission With a New Data Dictionary ===

A submitter creates a new submission, provides a title for the submission, links the submission to at least one study and at least one module, and uploads a data file containing the initial version of the submitted data.

In this case, no data dictionary is already present in the system that corresponds to the submitted data. The submitter creates a new data dictionary, provides a title for the dictionary, and uploads a file containing the initial version of the data dictionary. The submitter then links the initial version of the submitted data to the initial version of the new data dictionary. 

The submitter then sends a request for gatekeeper approval of the submission.

=== Use Case: Submitter Creates a New Submission With an Existing Data Dictionary ===

A submitter creates a new submission, provides a title for the submission, links the submission to at least one study and at least one module, and uploads a data file containing the initial version of the submitted data.

In this case, a data dictionary was previously created for a different submission that also applies to the new submission. The submitter links the initial version of the submitted data to the appropriate version of the existing data dictionary.

The submitter then sends a request for gatekeeper approval of the submission.

=== Use Case: Submitter Revises a Submission Before Requesting Approval ===

A submitter creates a new submission, with a new data dictionary.

Before the submitter sends a request for gatekeeper approval, she realises that some data are missing in the initial version of the submitted data. She downloads the initial version of the submitted data, adds the missing data, and uploads a revised version of the submitted data. She then links the revised version of the submitted data to the initial version of the data dictionary, because neither the structure nor the semantics of the data have changed.

The submitter then sends a request for gatekeeper approval of the submission.

=== Use Case: Submitter Revises a Submission and Dictionary Before Requesting Approval ===

A submitter creates a new submission, with a new data dictionary.

Before the submitter sends a request for gatekeeper approval, she realises that some fields are missing in the initial version of the submitted data. She downloads the initial version of the submitted data, adds the missing fields, and uploads a new version of the submitted data.

Because the fields used in the data have changed, the submitter also uploads a new version of the data dictionary she previously created. The new version includes a definition of each of the new fields. She then links the revised version of the submitted data with the revised version of the data dictionary.

The submitter then sends a request for gatekeeper approval of the submission. 

=== Use Case: Gatekeeper Reviews and Approves Submission Request ===

A submitter sends a request for gatekeeper approval of their new submission. The request contains a link to a specific version of the submitted data, and a specific version of the associated data dictionary, as specified in the request by the submitter.

A gatekeeper is allocated to review the request. She downloads the specified version of the submitted data and the specified version of the data dictionary, reviews them, and decides to approve the request. The gatekeeper approves the request. The gatekeeper then assigns a curator to the submission, and curation begins.

=== Use Case: Gatekeeper Approves Submission Request After Revision ===

A submitter sends a request for gatekeeper approval of their new submission. 

A gatekeeper is allocated to review the request. She downloads the specified version of the submitted data and the specified version of the data dictionary, and reviews them. 

In this case, the data dictionary is not complete, and the gatekeeper cannot understand the data. The gatekeeper denies the request, explaining that the data dictionary is incomplete, and encouraging the submitter to revise the data dictionary and make a new request for approval.

The submitter is notified of the gatekeeper's decision. She then uploads a new version of the data dictionary containing the missing information, removes the link from the initial version of the submitted data to the initial, incomplete, version of the data dictionary, and links the initial version of the submitted data to the revised version of the data dictionary.

The submitter then sends a new request for gatekeeper approval of the revised submission.

A gatekeeper is notified of the request for approval, downloads the initial version of the submitted data and the revised version of the data dictionary, reviews them, and decides to approve the submission. The gatekeeper assigns a curator, and curation begins.

=== Use Case: Submitted Data is Not Relevant to WWARN ===

A submitter sends a request for gatekeeper approval of their new submission. 

A gatekeeper is allocated to review the request. She downloads the specified version of the submitted data and the specified version of the data dictionary, and reviews them. 

In this case, it is clear that none of the data are relevant to any of WWARN's scientific modules. The gatekeeper denies the request for approval, providing an explanation of the reasons why the request was denied. The submitter is notified of the gatekeeper's decision and explanation. The submitter deletes her submission.

=== Use Case: Coordinator Reviews Submission Activity ===

A coordinator reviews a list of all submissions that are pending gatekeeper approval. She notices that one submission has been pending gatekeeper approval for more than 2 weeks. She contacts the gatekeeper assigned to the submission and asks that the submission be reviewed with high priority.

=== Use Case: Gatekeeper Reviews Submission Activity ===

A gatekeeper reviews a list of all submission requests that have been allocated to her and that have not yet been reviewed. She selects a request from the list and reviews it.

=== Use Case: Submitter Reviews Their Submission Activity ===

A submitter reviews a list of all her submissions that have received gatekeeper approval, a list of all her submissions that are pending gatekeeper approval, and all her "draft" submissions for which she has not yet requested gatekeeper approval.

From the list of her submissions for which she has not yet requested gatekeeper approval, she selects those that are ready for gatekeeper review, and requests gatekeeper approval for them.

----
== Data Submission Functional Requirements ==

=== (Submitter) Managing Studies ===

  * A submitter will be able to create a new study. This involves providing a title and textual summary for the study, and linking the study to at least one module.

  * A submitter will be able to view a list of all studies they have previously created.

  * A submitter will be able to view a list of all studies created by anyone.

  * Lists of studies can be filtered by module.

=== (Submitter) Entering and Revising Study Metadata ===

  * A submitter will be able to enter metadata about any study they have previously created.

  * A submitter will be able to revise (i.e., update, modify) metadata about any study they have previously created.

N.B. study metadata includes the study site questionnaire (SSQ).

@@TODO: what are metadata fields common across modules? what are fields of SSQ for each module? what fields are mandatory, what are optional?

=== (Submitter) Creating a New Submission & Uploading Data ===

  * A submitter will be able to create a new submission. This involves providing a title and textual summary for the submission, associating the submission with at least one previously created study, associating the submission with at least one WWARN module, and uploading a single data file containing the initial version of the submitted data.

By default, the submitter becomes the owner of any submission they create.

Note that a new submission will be created in a "draft" state, i.e., will not automatically be forwarded to a gatekeeper for review. The submitter must explicitly request gatekeeper approval for a new submission, see below.

=== (Submitter) Revising Submitted Data ===

  * A submitter will be able to upload a data file containing a new version of the submitted data, for any submission they own.

  * A submitter will be able to view a version history of the submitted data for any submission they own.

=== (Submitter) Downloading Submitted Data ===

  * A submitter will be able to download the latest version of the submitted data, for any submission they own.

  * A submitter will also be able to download any previous version of the submitted data, for any submission they own.

=== (Submitter) Creating a Data Dictionary ===

  * A submitter will be able to create a new data dictionary. This involves providing a title for the new data dictionary, and uploading a file containing the initial version of the data dictionary.

By default, a submitter is the owner of any data dictionary they create.

=== (Submitter) Revising a Data Dictionary ===

  * A submitter will be able to upload a file containing a new version of a previously created data dictionary they own.

  * A submitter will be able to view a version history for any data dictionary they own.

=== (Submitter) Downloading a Data Dictionary ===

  * A submitter will be able to download the latest version and any previous version of any data dictionary they own.

=== (Submitter) Linking Submitted Data With a Data Dictionary ===

  * For any submission they own, a submitter will be able to link a specific version of the submitted data with a specific version of a data dictionary. They do not have to also own the data dictionary to which the link is made.

  * For any submission they own, a submitter will be able to remove the current link between the latest version of the submitted data and the version of the data dictionary to which it is linked, and replace it with a new link to a different version of the same data dictionary, or some version of a different data dictionary.

  * For any submission they own, a submitter will be able to view a history of any changes that have been made to links between the submitted data and data dictionaries. 

=== (Submitter) Requesting Gatekeeper Submission Approval ===

  * A submitter will be able to request gatekeeper approval for any submission they own.

=== (Submitter) Overview of Submission Activity ===

  * A submitter will be able to view a list of all submissions they own. The status of each submission, i.e., either "draft" (not yet submitted to gatekeeper), pending gatekeeper approval, gatekeeper approved, or gatekeeper denied, will be clearly shown.

  * A submitter will also be able to view a list of only draft submissions, a list of submissions that are pending gatekeeper approval, and a list of submissions that have been approved by a gatekeeper.

  * Any of these submission lists can be grouped by study or module.

=== (Gatekeeper) Overview of Submission Activity ===

  * A gatekeeper will be able to view a list of all submissions from any submitter, not including those for which the submitter has not yet requested gatekeeper approval. The status of each submission (i.e., either pending gatekeeper approval, gatekeeper approved or gatekeeper denied) will be clearly shown.

  * A gatekeeper will also be able to view a list of only those submissions that have been approved by a gatekeeper (not necessarily themselves), a list of submissions that have been denied, and a list of submissions that are pending gatekeeper approval.

  * Any of these submissions lists can be grouped by submitter, study or module.

=== (Gatekeeper) Downloading Submitted Data and Data Dictionaries ===

  * A gatekeeper will be able to download any version of submitted data for which a request for gatekeeper approval has been made. A gatekeeper will also be able to download any version of a data dictionary to which the submitted data is linked.

=== (Gatekeeper) Approving Requests and Assigning a Curator ===

  * A gatekeeper will be able to approve any submission for which a request for gatekeeper approval has been made. 

  * A gatekeeper will be able to assign a curator to an approved submission.

Note that, once a gatekeeper has approved a submission, that approval is assumed to apply, even if the submitter uploads a new revision of the submitted data.

@@TODO: can a gatekeeper revoke an approval?

=== (Gatekeeper) Denying Requests ===

  * A gatekeeper will be able to deny any submission for which a request for gatekeeper approval has been made. This involves providing an explanation of the reasons why the request has been denied, and any further information for the submitter.

=== (Coordinator) Overview of Submission Activity ===

  * A coordinator will be able to view a list of all submissions from any submitter, not including those for which the submitter has not yet requested gatekeeper approval. The status of each submission (i.e., either pending gatekeeper approval, gatekeeper approved or gatekeeper denied) will be clearly shown.

  * A coordinator will also be able to view a list of only those submissions that have been approved by a gatekeeper, a list of submissions denied by a gatekeeper, and a list of submissions that are pending gatekeeper approval.

  * Any of these submissions lists can be grouped by submitter, study or module.

----
= Part 2 - Data Curation & Standardisation =
----
@@TODO
----
= Glossary =

@@TODO
