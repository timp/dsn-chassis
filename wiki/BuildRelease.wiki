#summary How to create a war of Chassis Manta for release
#labels Phase-Deploy

= Introduction =

Maven is used to build a release.


= Details =

== Prepare repository ==
Run maven with the following settings:

Goals: release:prepare

{{
cd manta-webapp
mvn release:prepare -Dusername=_me_ -Dpassword=_mypassword_
}}}

Cannot run this with local changes. May need to also include the param -Dresume=false

This will result in a new tag in the repository corresponding to the version in the pom

== Build server specific wars ==

{{{ 
svn co http://dsn-chassis.googlecode.com/svn/tags/manta-webapp-1.0.1-RC-1
cd manta-webapp-1.0.1-RC-1
mvn package -P _profile_
 }}}

== Ensure correct jars are in the tomcat endorsed directory ==

{{{
cd /usr/share/tomcat6/endorsed
wget http://cloud1.cggh.org/maven2/org/cggh/chassis/manta-config/0.2-alpha-4/manta-config-0.2-alpha-4.jar
}}}

== Example deployment ==

 # Unzip the WAR locally to a directory named 1.5.0-RC-2, which contains the WEB-INF, etc.
 # Upload the directory to your home directory
 # sudo su
 # Move the directory to /srv/chassis-manta/
 # Change the ownership of the directory to tomcat6:tomcat6
 # Stop Tomcat with /etc/init.d/tomcat6 stop
 # Remove the repository symlink in /var/lib/tomcat6/webapps/
 # Create a symlink to the new release with ln -s /srv/chassis-manta/1.5.0-RC-2 repository
 # Start Tomcat with /etc/init.d/tomcat6 start