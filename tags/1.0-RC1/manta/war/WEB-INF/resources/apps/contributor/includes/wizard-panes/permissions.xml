<?oxygen NVDLSchema="../../../../../../../oxygen/samples/nvdl/xhtml-xforms-11-orbeon.nvdl"?>
<div 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:xforms="http://www.w3.org/2002/xforms" 
	xmlns:ev="http://www.w3.org/2001/xml-events"
	xmlns:atombeat="http://purl.org/atombeat/xmlns">

	<h2>Permissions<!-- - (Step 2 of 5)--></h2>

	<h3>Administrators</h3>

	
	<xforms:group ref="instance('ins-draft-entry')//study-permissions-entry-container//atombeat:security-descriptor/atombeat:groups/atombeat:group[@id='GROUP_ADMINISTRATORS']">
    
		<div id="editable-list-of-administrators-container">
    
		<table>

			<xforms:repeat nodeset="atombeat:member" id="rep-administrator">
				
				<tr class="repeated-element">
					
					<td>
	                      <xforms:trigger ref="." class="addRemove">
	                      	<xforms:label>
	                      		<img
	                      			src="/apps/contributor/common/remove.gif"
	                      			alt="Remove" />
	                      	</xforms:label>
	                      	<xforms:delete ev:event="DOMActivate"
	                      		context="." nodeset="."
	                      		at="index('rep-administrator')" />
	                      </xforms:trigger>
					</td>
					<td>
						<span class="email-address-textbox-container">
							<xforms:input ref=".">
								<xforms:label>Email address:</xforms:label>
								<xforms:alert>Please provide a valid email address.</xforms:alert>
							</xforms:input>
						</span>
					</td>
				</tr>
				
			</xforms:repeat>
			
			<tr>
				<td>
	                  <xforms:trigger class="addRemove">
	                      <xforms:label><img src="/apps/contributor/common/add.gif" alt="Add" /></xforms:label>
	                      <xforms:insert 
	                      	ev:event="DOMActivate" 
	                      	context="." 
	                      	nodeset="atombeat:member" 
	                      	at="last()" 
	                      	position="after" 
	                      	origin="instance('ins-user-template')"/>
	                  </xforms:trigger>
				</td>
				<td>
					<span id="add-administrator-link-container">
	                  <xforms:trigger appearance="minimal">
	                      <xforms:label>Add an administrator</xforms:label>
	                      <xforms:insert 
	                      	ev:event="DOMActivate" 
	                      	context="." 
	                      	nodeset="atombeat:member" 
	                      	at="last()" 
	                      	position="after" 
	                      	origin="instance('ins-user-template')"/>
	                  </xforms:trigger>
					</span>
				</td>
			</tr>
			
		</table>

	</div>
	
	</xforms:group>

	<p class="form-navi-full alignCenter">
	

		
	
		<xforms:trigger ref="instance('ins-control')/save-draft-trigger"
			class="alignLeft">
			<xforms:label>&lt; Previous</xforms:label>
			<xforms:action ev:event="DOMActivate"
				if="../draft-entry-is-valid = 'true'">
				<xforms:setvalue
					ref="instance('ins-draft-entry')/atom:content/draft/wizard-pane-to-show"
					value="'study-terms'" />
				<xforms:send submission="sub-implicit-put-draft-entry" />
			</xforms:action>
			<xforms:action ev:event="DOMActivate"
				if="not(../draft-entry-is-valid = 'true')">
				<xforms:message>
					Please complete all required fields.
				</xforms:message>
			</xforms:action>
		</xforms:trigger>

		<xforms:trigger ref="instance('ins-control')/save-draft-trigger">
			<xforms:label>Save as draft</xforms:label>
			<xforms:action ev:event="DOMActivate" if="../draft-entry-is-valid = 'true'">
				<xforms:send submission="sub-explicit-put-draft-entry"/>
			</xforms:action>
			<xforms:action ev:event="DOMActivate" if="not(../draft-entry-is-valid = 'true')">
				<xforms:message>Please complete all required fields.</xforms:message>
			</xforms:action>
		</xforms:trigger>

		<span id="permissions-next-button-container" class="alignRight">
			<xforms:trigger
				ref="instance('ins-control')/save-draft-trigger">
				<xforms:label>Next &gt;</xforms:label>
				<xforms:action ev:event="DOMActivate"
					if="../draft-entry-is-valid = 'true'">
					<xforms:setvalue
						ref="instance('ins-draft-entry')/atom:content/draft/wizard-pane-to-show"
						value="'acknowledgements'" />
					<xforms:send
						submission="sub-implicit-put-draft-entry" />
				</xforms:action>
				<xforms:action ev:event="DOMActivate"
					if="not(../draft-entry-is-valid = 'true')">
					<xforms:message>
						Please complete all required fields.
					</xforms:message>
				</xforms:action>
			</xforms:trigger>
		</span>

		
		<span class="skip-links">
			<xforms:trigger
				ref="instance('ins-control')/save-draft-trigger"
				appearance="minimal" class="alignLeft">
				<xforms:label>&lt;&lt; Data home</xforms:label>
				<xforms:action ev:event="DOMActivate"
					if="../draft-entry-is-valid = 'true'">
					<xforms:send submission="sub-back-home" />
				</xforms:action>
				<xforms:action ev:event="DOMActivate"
					if="not(../draft-entry-is-valid = 'true')">
					<xforms:message>
						Please complete all required fields.
					</xforms:message>
				</xforms:action>
			</xforms:trigger>
			<span id="skip-to-end-link-container" class="alignRight">
				<xforms:trigger
					ref="instance('ins-control')/save-draft-trigger"
					appearance="minimal">
					<xforms:label>Skip to end &gt;&gt;</xforms:label>
					<xforms:action ev:event="DOMActivate"
						if="../draft-entry-is-valid = 'true'">
						<xforms:setvalue
							ref="instance('ins-draft-entry')/atom:content/draft/wizard-pane-to-show"
							value="'review'" />
						<xforms:send
							submission="sub-implicit-put-draft-entry" />
					</xforms:action>
					<xforms:action ev:event="DOMActivate"
						if="not(../draft-entry-is-valid = 'true')">
						<xforms:message>
							Please complete all required fields.
						</xforms:message>
					</xforms:action>
				</xforms:trigger>
			</span></span>

	</p>
	
</div>