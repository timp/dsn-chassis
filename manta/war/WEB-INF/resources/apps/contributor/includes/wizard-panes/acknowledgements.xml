<div 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:xforms="http://www.w3.org/2002/xforms" 
	xmlns:ev="http://www.w3.org/2001/xml-events">

	<h2>Acknowledgements<!-- - (Step 3 of 5)--></h2>

	<xforms:group id="list-of-acknowledgements" ref="instance('ins-draft-entry')/atom:content/draft/study-entry-container/atom:entry/atom:content/study/acknowledgements">
	        
	        
		<span id="editable-list-of-acknowledgements-container">	        
	        
	        <table>

	            <xforms:repeat nodeset="person" id="rep-person">
	            	
	                <tr class="repeated-element">
	                	
	                	<td class="acknowledgement-deletion-cell">
	                        <xforms:trigger class="addRemove">
	                        	<xforms:delete ev:event="DOMActivate"
	                        		context="." nodeset="."
	                        		at="index('rep-person')" />
	                        	<xforms:label>
	                        		<img
	                        			src="/apps/fr/style/remove.gif" />
	                        	</xforms:label>
	                        </xforms:trigger>
	                	</td>
	                	<td class="acknowledgement-form-cell">
	                		<span class="first-name-textbox-container">
		                		<xforms:input ref="first-name">
		                            <xforms:label>First name:</xforms:label>
		                		</xforms:input>
	                		</span>
	                       <br/>
	                		<span class="middle-name-textbox-container">
	                		<xforms:input ref="middle-name">
	                            <xforms:label>Middle name:</xforms:label>
	                		</xforms:input>
	                		</span>
	                       <br/>
	                		<span class="family-name-textbox-container">
		                		<xforms:input ref="family-name">
		                            <xforms:label>Family name:</xforms:label>
		                		</xforms:input>
	                		</span>
	                        <br/>
	                		<span class="email-address-textbox-container">
		                		<xforms:input ref="email-address">
		                            <xforms:label>Email address:</xforms:label>
		                        	<xforms:alert>Please provide a valid email address.</xforms:alert>
		                        	</xforms:input>
		                		</span>
	                        <br/>
	                		<span class="institution-textbox-container">
		                		<xforms:input ref="institution">
		                            <xforms:label>Institution:</xforms:label>
		                		</xforms:input>
	                		</span>
	                        
	                		<div class="acknowledgement-movement-triggers">
	                			
	                			<span class="move-acknowledgment-up-button">
		                        <xforms:trigger ref=".[preceding-sibling::*]">
		                            <xforms:label>Move up <img src="/apps/fr/style/up.gif"/></xforms:label>
		                            <xforms:action ev:event="DOMActivate">
		                                <xforms:insert origin="context()" nodeset="preceding-sibling::*[1]" position="before"/>
		                                <xforms:delete nodeset="."/>
		                            </xforms:action>
		                        </xforms:trigger>
	                			</span>
		                        
	                			<span class="move-acknowledgment-down-button">
		                        <xforms:trigger ref=".[following-sibling::*]">
		                            <xforms:label>Move down <img src="/apps/fr/style/down.gif"/></xforms:label>
		                            <xforms:action ev:event="DOMActivate">
		                                <xforms:insert origin="context()" nodeset="following-sibling::*[1]"/>
		                                <xforms:delete nodeset="."/>
		                            </xforms:action>
		                        </xforms:trigger>
		                        </span>
	                        </div>

	                    </td>
	                </tr>
	            </xforms:repeat>
	            
	            <tr>
	                <td>
	                    <xforms:trigger class="addRemove">
	                        <xforms:label><img src="/apps/fr/style/add.gif"/></xforms:label>
	                        <xforms:insert 
	                            ev:event="DOMActivate" 
	                            context="." 
	                            nodeset="person" 
	                            at="last()" 
	                            position="after" 
	                            origin="instance('ins-person-template')"/>
	                    </xforms:trigger>
	                </td>
	                <td>
	                	<span id="add-acknowledgement-link-container">
		                    <xforms:trigger appearance="minimal" class="addRemove">
		                        <xforms:label>Add an acknowledgement</xforms:label>
		                        <xforms:insert 
		                            ev:event="DOMActivate" 
		                            context="." 
		                            nodeset="person" 
		                            at="last()" 
		                            position="after" 
		                            origin="instance('ins-person-template')"/>
		                    </xforms:trigger>
	                	</span>
	                </td>
	            </tr>
	            
	        </table>
	        
		</span>
	        
	</xforms:group>

	<p class="form-navi">
	
		
		
		<xforms:trigger ref="instance('ins-control')/save-draft-trigger"
			class="alignLeft">
			<xforms:label>&lt; Previous</xforms:label>
			<xforms:action ev:event="DOMActivate"
				if="../draft-entry-is-valid = 'true'">
				<xforms:setvalue
					ref="instance('ins-draft-entry')/atom:content/draft/wizard-pane-to-show"
					value="'permissions'" />
				<xforms:send submission="sub-implicit-put-draft-entry" />
			</xforms:action>
			<xforms:action ev:event="DOMActivate"
				if="not(../draft-entry-is-valid = 'true')">
				<xforms:message>
					Please complete all required fields.
				</xforms:message>
			</xforms:action>
		</xforms:trigger>

		<span id="acknowledgements-save-as-draft-button-container">
			<xforms:trigger
				ref="instance('ins-control')/save-draft-trigger" class="alignCenter">
				<xforms:label>Save as draft</xforms:label>
				<xforms:action ev:event="DOMActivate"
					if="../draft-entry-is-valid = 'true'">
					<xforms:send
						submission="sub-explicit-put-draft-entry" />
				</xforms:action>
				<xforms:action ev:event="DOMActivate"
					if="not(../draft-entry-is-valid = 'true')">
					<xforms:message>
						Please complete all required fields.
					</xforms:message>
				</xforms:action>
			</xforms:trigger>
		</span>

		<span id="acknowledgements-next-button-container" class="alignRight">
			<xforms:trigger
				ref="instance('ins-control')/save-draft-trigger">
				<xforms:label>Next &gt;</xforms:label>
				<xforms:action ev:event="DOMActivate"
					if="../draft-entry-is-valid = 'true'">
					<xforms:setvalue
						ref="instance('ins-draft-entry')/atom:content/draft/wizard-pane-to-show"
						value="'upload-files'" />
					<xforms:send
						submission="sub-implicit-put-draft-entry" />
				</xforms:action>
				<xforms:action ev:event="DOMActivate"
					if="not(../draft-entry-is-valid = 'true')">
					<xforms:message>
						Please complete all required fields.
					</xforms:message>
				</xforms:action>
			</xforms:trigger>
		</span>

		
		<span class="skip-links">
			<xforms:trigger
				ref="instance('ins-control')/save-draft-trigger"
				appearance="minimal" class="alignLeft">
				<xforms:label>&lt;&lt; Data home</xforms:label>
				<xforms:action ev:event="DOMActivate"
					if="../draft-entry-is-valid = 'true'">
					<xforms:send submission="sub-back-home" />
				</xforms:action>
				<xforms:action ev:event="DOMActivate"
					if="not(../draft-entry-is-valid = 'true')">
					<xforms:message>
						Please complete all required fields.
					</xforms:message>
				</xforms:action>
			</xforms:trigger>
			<xforms:trigger
				ref="instance('ins-control')/save-draft-trigger"
				appearance="minimal" class="alignRight">
				<xforms:label>Skip to end &gt;&gt;</xforms:label>
				<xforms:action ev:event="DOMActivate"
					if="../draft-entry-is-valid = 'true'">
					<xforms:setvalue
						ref="instance('ins-draft-entry')/atom:content/draft/wizard-pane-to-show"
						value="'review'" />
					<xforms:send
						submission="sub-implicit-put-draft-entry" />
				</xforms:action>
				<xforms:action ev:event="DOMActivate"
					if="not(../draft-entry-is-valid = 'true')">
					<xforms:message>
						Please complete all required fields.
					</xforms:message>
				</xforms:action>
			</xforms:trigger></span>

	</p>

</div>